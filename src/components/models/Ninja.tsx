/*
Auto-generated by: https://github.com/pmndrs/gltfjsx
Command: npx gltfjsx@6.2.5 public/models/Ninja.gltf -o src/components/Ninja.jsx
*/

import React, { useEffect, useRef } from 'react'
import { useGLTF, useAnimations } from '@react-three/drei'
import { useConfigurator } from '../../../app/table-controller/Context'

export function Ninja({ hovered, ...props }) {
  const group = useRef()
  // @ts-expect-error
  const { nodes, materials, animations } = useGLTF('/models/Ninja.gltf')
  const { actions } = useAnimations(animations, group)
  let { legs, body, arms, head, weapon } = useConfigurator()
  const hands = 1
  const belt = 1

  // @ts-expect-error
  useEffect(() => {
    const animation = hovered ? 'Wave' : 'Idle'
    actions[animation].reset().fadeIn(0.5).play()
    return () => actions[animation].fadeOut(0.5)
  }, [hovered])

  return (
    <group ref={group} {...props} dispose={null}>
      <group name='Scene'>
        <group name='CharacterArmature'>
          <primitive object={nodes.Root} />
          <group name='Ninja'>
            {body && (
              <skinnedMesh
                visible={body?.visible ?? true}
                name='Cube092'
                geometry={nodes.Cube092.geometry}
                material={materials.Ninja_Main}
                skeleton={nodes.Cube092.skeleton}
              />
            )}
            {hands && (
              <skinnedMesh
                name='Cube092_1'
                geometry={nodes.Cube092_1.geometry}
                material={materials.Ninja_Secondary}
                skeleton={nodes.Cube092_1.skeleton}
              />
            )}
            {belt && (
              <skinnedMesh
                name='Cube092_2'
                geometry={nodes.Cube092_2.geometry}
                material={materials.Belt}
                skeleton={nodes.Cube092_2.skeleton}
              />
            )}
            {weapon.visible && (
              <>
                <skinnedMesh
                  name='Cube092_3'
                  geometry={nodes.Cube092_3.geometry}
                  material={materials.Gold}
                  skeleton={nodes.Cube092_3.skeleton}
                />
                <skinnedMesh
                  name='Cube092_6'
                  geometry={nodes.Cube092_6.geometry}
                  material={materials.Birb_Secondary}
                  skeleton={nodes.Cube092_6.skeleton}
                />
              </>
            )}
            <skinnedMesh
              name='Cube092_4'
              geometry={nodes.Cube092_4.geometry}
              material={materials.Eye_Black}
              skeleton={nodes.Cube092_4.skeleton}
            />
            <skinnedMesh
              name='Cube092_5'
              geometry={nodes.Cube092_5.geometry}
              material={materials.Eye_White}
              skeleton={nodes.Cube092_5.skeleton}
            />
          </group>
        </group>
      </group>
    </group>
  )
}

useGLTF.preload('/Ninja.gltf')
